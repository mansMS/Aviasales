{"version":3,"sources":["components/ticketsBlock/logo.png","reducers/tickets.ts","store/configureStore.ts","types/actions.ts","actions/tickets.ts","services/ticketsServices.ts","services/sourceURLs.ts","components/ticketsBlock/filterSection/index.ts","components/ticketsBlock/filterSection/FilterSection.tsx","components/ticketsBlock/tab/index.ts","components/ticketsBlock/tab/Tabs.tsx","components/ticketsBlock/ticketSection/ticketItem/index.ts","components/ticketsBlock/ticketSection/ticketItem/TicketItem.tsx","components/spinner/index.ts","components/spinner/Spinner.tsx","components/ticketsBlock/ticketSection/index.ts","components/ticketsBlock/ticketSection/TicketSection.tsx","components/ticketsBlock/index.ts","components/ticketsBlock/TicketsBlock.tsx","containers/TicketsBlockContainer.tsx","components/app/index.ts","components/app/App.tsx","index.tsx"],"names":["module","exports","initialState","searchId","tickets","loading","error","rootReducer","combineReducers","state","action","type","createStore","applyMiddleware","thunk","setTickets","dispatch","a","async","fetch","response","ok","Error","status","json","console","getSearchId","then","getTicketsPack","ticketsPack","stop","getTickets","catch","ticketsError","message","FilterSection","filter","filterChangeHandler","className","map","label","index","key","id","value","checked","includes","onChange","htmlFor","Tabs","tab","tabChangeHandler","name","TicketItem","ticket","price","carrier","segments","directOrigin","origin","directDestination","destination","directStops","stops","directDuration","duration","returnOrigin","returnDestination","returnStops","returnDuration","directDate","Date","date","directOriginHour","getHours","directOriginMinute","getMinutes","setMinutes","directDestinationHour","directDestinationMinute","returnDate","returnOriginHour","returnOriginMinute","returnDestinationHour","returnDestinationMinute","Math","floor","slice","src","alt","length","Spinner","TicketSection","TicketsBlock","logo","TicketsBlockContainer","this","props","e","filterIndex","target","setState","indexOf","filteredTickets","sort","ticket1","ticket2","bind","Component","connect","bindActionCreators","App","app","store","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7d42be7a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c5fcf845.png\";","import { StoreStructure } from '../types/storeStructure';\r\nimport { TicketsActionTypes } from '../types/actions';\r\nimport {\r\n  FETCH_SEARCH_ID_REAUEST,\r\n  FETCH_SEARCH_ID_SUCCESS,\r\n  FETCH_TICKETS_SUCCESS,\r\n  FETCH_TICKETS_FAILURE\r\n} from \"../types/actions\";\r\n\r\nconst initialState: StoreStructure = {\r\n  searchId: '',\r\n  tickets: [],\r\n  loading: false,\r\n  error: ''\r\n}\r\n\r\nexport default (state = initialState, action: TicketsActionTypes): StoreStructure => {\r\n  switch (action.type) {\r\n    case FETCH_SEARCH_ID_REAUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: ''\r\n      }\r\n    case FETCH_SEARCH_ID_SUCCESS:\r\n      return {\r\n        ...state,\r\n        searchId: action.searchId\r\n      }\r\n    case FETCH_TICKETS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        tickets: action.tickets,\r\n        loading: false,\r\n        error: ''\r\n      }\r\n    case FETCH_TICKETS_FAILURE:\r\n      return {\r\n        ...state,\r\n        error: action.error\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}","import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport thunk, { ThunkMiddleware } from 'redux-thunk';\r\nimport ticketsReducer from '../reducers/tickets';\r\nimport { AppActions } from '../types/actions';\r\n\r\nexport const rootReducer = combineReducers({\r\n  tickets: ticketsReducer\r\n})\r\n\r\nexport type AppState = ReturnType<typeof rootReducer>\r\n\r\nexport default createStore(rootReducer, applyMiddleware(thunk as ThunkMiddleware<AppState, AppActions>));","import { Ticket } from './ticket';\r\n\r\nexport const FETCH_SEARCH_ID_REAUEST = 'FETCH_SEARCH_ID_REAUEST';\r\nexport const FETCH_SEARCH_ID_SUCCESS = 'FETCH_SEARCH_ID_SUCCESS';\r\n\r\nexport const FETCH_TICKETS_SUCCESS = 'FETCH_TICKETS_SUCCESS';\r\nexport const FETCH_TICKETS_FAILURE = 'FETCH_TICKETS_FAILURE';\r\n\r\n\r\nexport interface SearchIdRequestAction {\r\n  type: typeof FETCH_SEARCH_ID_REAUEST\r\n}\r\n\r\nexport interface SearchIdLoadtAction {\r\n  type: typeof FETCH_SEARCH_ID_SUCCESS,\r\n  searchId: string\r\n}\r\nexport interface TicketsLoadtAction {\r\n  type: typeof FETCH_TICKETS_SUCCESS,\r\n  tickets: Ticket[]\r\n}\r\nexport interface TicketsErrortAction {\r\n  type: typeof FETCH_TICKETS_FAILURE,\r\n  error: string\r\n}\r\n\r\nexport type TicketsActionTypes =\r\n  | SearchIdRequestAction\r\n  | SearchIdLoadtAction\r\n  | TicketsLoadtAction\r\n  | TicketsErrortAction;\r\n\r\n\r\nexport type AppActions = TicketsActionTypes;","import { Dispatch } from 'redux';\r\nimport { getSearchId, getTickets } from '../services/ticketsServices';\r\nimport {\r\n  FETCH_SEARCH_ID_REAUEST,\r\n  FETCH_SEARCH_ID_SUCCESS,\r\n  FETCH_TICKETS_SUCCESS,\r\n  FETCH_TICKETS_FAILURE,\r\n  AppActions\r\n} from \"../types/actions\";\r\nimport { Ticket } from \"../types/ticket\";\r\n\r\n\r\nexport const searchIdRequested = (): AppActions => {\r\n  return {\r\n    type: FETCH_SEARCH_ID_REAUEST\r\n  }\r\n}\r\n\r\nexport const searchIdLoaded = (searchId: string): AppActions => {\r\n  return {\r\n    type: FETCH_SEARCH_ID_SUCCESS,\r\n    searchId\r\n  }\r\n}\r\n\r\nexport const ticketsLoaded = (tickets: Ticket[]): AppActions => {\r\n  return {\r\n    type: FETCH_TICKETS_SUCCESS,\r\n    tickets\r\n  }\r\n}\r\n\r\nexport const ticketsError = (error: string): AppActions => {\r\n  return {\r\n    type: FETCH_TICKETS_FAILURE,\r\n    error\r\n  }\r\n}\r\n\r\nexport const setTickets = () => (dispatch: Dispatch<AppActions>) => {\r\n  dispatch(searchIdRequested());\r\n  getSearchId()\r\n    .then(response => {\r\n      dispatch(searchIdLoaded(response));\r\n      return getTickets(response);\r\n    })\r\n    .then(response => {\r\n      dispatch(ticketsLoaded(response))\r\n    })\r\n    .catch(error => dispatch(ticketsError(error.message)))\r\n}","import { getSearchIdURL, getTicketsURL } from './sourceURLs';\r\nimport { Ticket } from '../types/ticket';\r\n\r\nexport const getSearchId = async () => {\r\n  try {\r\n    const response = await fetch(getSearchIdURL);\r\n    if (!response.ok) {\r\n      throw new Error(`Ошибка при загрузке ифентификатора поиска: ${response.status}`)\r\n    } else {\r\n      return await response.json();\r\n    }\r\n  } catch (error) {\r\n    console.error('Ошибка:', error);\r\n    return ('Ошибка при загрузке ифентификатора поиска');\r\n  }\r\n}\r\n\r\nexport const getTickets = async ({ searchId }: { searchId: string }) => {\r\n  let tickets: Ticket[] = [];\r\n\r\n  const getTicketsPack = async (searchId: string) => {\r\n    const response = await fetch(`${getTicketsURL}?searchId=${searchId}`);\r\n    if (response.status === 502) {\r\n      await getTicketsPack(searchId);\r\n    } else if (response.status !== 200) {\r\n      await getTicketsPack(searchId);\r\n    } else {\r\n      let ticketsPack = await response.json();\r\n      tickets = [...tickets, ...ticketsPack.tickets];\r\n      if (!ticketsPack.stop) {\r\n        await getTicketsPack(searchId);\r\n      }\r\n    }\r\n  }\r\n\r\n  await getTicketsPack(searchId);\r\n  return (tickets)\r\n}\r\n\r\n","export const getSearchIdURL = 'https://front-test.beta.aviasales.ru/search';\r\nexport const getTicketsURL = 'https://front-test.beta.aviasales.ru/tickets';","import FilterSection from './FilterSection';\r\n\r\nexport default FilterSection;","import React from 'react';\r\nimport './FilterSection.scss';\r\n\r\ntype Props = {\r\n  filter: number[],\r\n  filterChangeHandler: (e: React.ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nconst FilterSection: React.FC<Props> = ({ filter, filterChangeHandler }) => {\r\n\r\n  const filterOptions: string[] = ['Все', 'Без пересадок', '1 пересадка', '2 пересадки', '3 пересадки'];\r\n\r\n  return (\r\n    <section className=\"FilterSection\">\r\n      <div className=\"FilterBlock\">\r\n        <p className=\"FilterHeader\">Количество пересадок</p>\r\n        <ul className=\"FilterList\">\r\n          {\r\n            filterOptions.map((label, index) => (\r\n              <li className=\"FilterItem\" key={index}>\r\n                <input\r\n                  className=\"FilterItemInput\"\r\n                  type=\"checkbox\"\r\n                  id={`checkbox_${index}`}\r\n                  value={index}\r\n                  checked={filter.includes(index - 1)}\r\n                  onChange={filterChangeHandler}\r\n                />\r\n                <label className=\"FilterItemLabel\" htmlFor={`checkbox_${index}`}>{label}</label>\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default FilterSection;","import Tabs from './Tabs';\r\n\r\nexport default Tabs;","import React from 'react';\r\nimport './Tabs.scss';\r\n\r\ntype Props = {\r\n  tab: string,\r\n  tabChangeHandler: (e: React.ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nconst Tabs: React.FC<Props> = ({ tab, tabChangeHandler }) => {\r\n  return (\r\n    <section className=\"Tabs\">\r\n      <div className=\"TabsRadio\">\r\n        <input\r\n          className=\"RadioInput\"\r\n          type=\"radio\"\r\n          name=\"radioTab\"\r\n          id=\"cheapestRadio\"\r\n          checked={tab === \"cheapest\"}\r\n          value={\"cheapest\"}\r\n          onChange={tabChangeHandler}\r\n        />\r\n        <label className=\"RadioLabel\" htmlFor=\"cheapestRadio\">Самый дешевый</label>\r\n      </div>\r\n      <div className=\"TabsRadio\">\r\n        <input\r\n          className=\"RadioInput\"\r\n          type=\"radio\"\r\n          name=\"radioTab\"\r\n          id=\"fastestRadio\"\r\n          checked={tab === \"fastest\"}\r\n          value={\"fastest\"}\r\n          onChange={tabChangeHandler}\r\n        />\r\n        <label className=\"RadioLabel\" htmlFor=\"fastestRadio\">Самый быстрый</label>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Tabs;","import TicketItem from './TicketItem';\r\n\r\nexport default TicketItem;","import React from 'react';\r\nimport { Ticket } from '../../../../types/ticket';\r\nimport './TicketItem.scss';\r\n\r\ntype Props = {\r\n  ticket: Ticket\r\n}\r\n\r\nconst TicketItem: React.FC<Props> = ({ ticket: { price, carrier, segments } }) => {\r\n\r\n  const [\r\n    {\r\n      origin: directOrigin,\r\n      destination: directDestination,\r\n      stops: directStops,\r\n      duration: directDuration\r\n    },\r\n    {\r\n      origin: returnOrigin,\r\n      destination: returnDestination,\r\n      stops: returnStops,\r\n      duration: returnDuration\r\n    }] = segments;\r\n\r\n  let directDate = new Date(segments[0].date);\r\n  const directOriginHour = directDate.getHours();\r\n  const directOriginMinute = directDate.getMinutes();\r\n  directDate.setMinutes(directDate.getMinutes() + segments[0].duration);\r\n  const directDestinationHour = directDate.getHours();\r\n  const directDestinationMinute = directDate.getMinutes();\r\n\r\n  let returnDate = new Date(segments[1].date);\r\n  const returnOriginHour = returnDate.getHours();\r\n  const returnOriginMinute = returnDate.getMinutes();\r\n  returnDate.setMinutes(returnDate.getMinutes() + segments[0].duration);\r\n  const returnDestinationHour = returnDate.getHours();\r\n  const returnDestinationMinute = returnDate.getMinutes();\r\n\r\n  return (\r\n    <div className=\"TicketItem\">\r\n      <div className=\"MainInfo\">\r\n        <div className=\"Cost\">\r\n          {`${Math.floor(price / 1000)} ${(price + '').slice(-3)} Р`}\r\n        </div>\r\n        <img\r\n          className=\"CarrierIcon\"\r\n          src={`https://pics.avs.io/99/36/${carrier}.png`}\r\n          alt=\"CarrierIcon\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"FlightInfo\">\r\n        <div>\r\n          <span className=\"InfoLabel\">{`${directOrigin} - ${directDestination}`}</span>\r\n          <span className=\"Info\">\r\n            {`${directOriginHour}:${directOriginMinute} - ${directDestinationHour}:${directDestinationMinute}`}\r\n          </span>\r\n        </div>\r\n\r\n        <div>\r\n          <span className=\"InfoLabel\">В пути</span>\r\n          <span className=\"Info\">{`${Math.floor(directDuration / 60)}ч ${directDuration % 60}м`}</span>\r\n        </div>\r\n\r\n        <div>\r\n          <span className=\"InfoLabel\">\r\n            {\r\n              directStops.length\r\n                ? `${directStops.length} пересадк${directStops.length === 1 ? \"а\" : \"и\"}`\r\n                : \"Без пересадок\"\r\n            }\r\n          </span>\r\n          <span className=\"Info\">{directStops.map(stop => (`${stop} `))}</span>\r\n        </div>\r\n\r\n        <div>\r\n          <span className=\"InfoLabel\">{`${returnOrigin} - ${returnDestination}`}</span>\r\n          <span className=\"Info\">\r\n            {`${returnOriginHour}:${returnOriginMinute} - ${returnDestinationHour}:${returnDestinationMinute}`}\r\n          </span>\r\n        </div>\r\n\r\n        <div>\r\n          <span className=\"InfoLabel\">В пути</span>\r\n          <span className=\"Info\">{`${Math.floor(returnDuration / 60)}ч ${returnDuration % 60}м`}</span>\r\n        </div>\r\n\r\n        <div>\r\n          <span className=\"InfoLabel\">\r\n            {\r\n              returnStops.length\r\n                ? `${returnStops.length} пересадк${returnStops.length === 1 ? \"а\" : \"и\"}`\r\n                : \"Без пересадок\"\r\n            }\r\n          </span>\r\n          <span className=\"Info\">{returnStops.map(stop => (`${stop} `))}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TicketItem;","import Spinner from './Spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './Spinner.scss';\r\n\r\nconst Spinner: React.FC = () => {\r\n  return (\r\n    <div className=\"SpinnerBlock\">\r\n      <div className=\"Spinner\">\r\n        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Spinner;","import TicketSection from './TicketSection';\r\n\r\nexport default TicketSection;","import React from 'react';\r\nimport TicketItem from './ticketItem';\r\nimport Spinner from '../../spinner';\r\nimport { Ticket } from '../../../types/ticket';\r\nimport './TicketSection.scss';\r\n\r\ntype Props = {\r\n  tickets: Ticket[],\r\n  loading: boolean\r\n}\r\n\r\nconst TicketSection: React.FC<Props> = ({ tickets, loading }) => {\r\n  return (\r\n    <section className=\"TicketSection\">\r\n      {\r\n        loading\r\n          ? <div className=\"Loading-Error\"><Spinner /></div>\r\n          : tickets.length\r\n            ? tickets.map((ticket, index) => <TicketItem ticket={ticket} key={index} />)\r\n            : <p className=\"Loading-Error\">Нет данных</p>\r\n      }\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default TicketSection;","import TicketsBlock from './TicketsBlock';\r\n\r\nexport default TicketsBlock;","import React from 'react';\r\nimport logo from './logo.png';\r\nimport FilterSection from './filterSection';\r\nimport Tabs from './tab';\r\nimport TicketSection from './ticketSection';\r\nimport { Ticket } from '../../types/ticket';\r\nimport './TicketsBlock.scss';\r\n\r\ntype Props = {\r\n  tickets: Ticket[],\r\n  loading: boolean,\r\n  error: string,\r\n  filter: number[],\r\n  tab: string,\r\n  filterChangeHandler: (e: React.ChangeEvent<HTMLInputElement>) => void,\r\n  tabChangeHandler: (e: React.ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nconst TicketsBlock: React.FC<Props> = ({\r\n  tickets,\r\n  loading,\r\n  error,\r\n  filter,\r\n  tab,\r\n  filterChangeHandler,\r\n  tabChangeHandler }) => {\r\n\r\n  if (error) return <p>Ошибка загрузки: {error}</p>\r\n\r\n  return (\r\n    <div className=\"TicketsContainer\">\r\n      <section className=\"Logo\"><img src={logo} alt=\"logo\" /></section>\r\n      <FilterSection filter={filter} filterChangeHandler={filterChangeHandler} />\r\n      <Tabs tab={tab} tabChangeHandler={tabChangeHandler} />\r\n      <TicketSection tickets={tickets} loading={loading} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TicketsBlock;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setTickets } from '../actions/tickets';\r\nimport { AppState } from '../store/configureStore';\r\nimport { AppActions } from '../types/actions';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { bindActionCreators } from 'redux';\r\nimport TicketsBlock from '../components/ticketsBlock';\r\nimport { Ticket } from '../types/ticket';\r\n\r\ninterface TicketsBlockContainerProps { }\r\n\r\ninterface State {\r\n  filter: number[],\r\n  tab: string\r\n}\r\n\r\ntype Props = TicketsBlockContainerProps & LinkStateProps & LinkDispatchProps;\r\n\r\nclass TicketsBlockContainer extends Component<Props, State> {\r\n  readonly state: State = {\r\n    filter: [],\r\n    tab: 'cheapest'\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setTickets();\r\n  }\r\n\r\n  filterChangeHandler(e: React.ChangeEvent<HTMLInputElement>): void {\r\n    const filterIndex = +e.target.value - 1;\r\n\r\n    if (!this.state.filter.includes(filterIndex)) {\r\n      this.setState(state => ({ filter: [...state.filter, filterIndex] }))\r\n    } else {\r\n      this.setState(state => ({\r\n        filter: [...state.filter.slice(0, state.filter.indexOf(filterIndex)),\r\n        ...state.filter.slice(state.filter.indexOf(filterIndex) + 1)]\r\n      }))\r\n    }\r\n  }\r\n\r\n  tabChangeHandler(e: React.ChangeEvent<HTMLInputElement>): void {\r\n    this.setState({ tab: e.target.value })\r\n  }\r\n\r\n  render() {\r\n    const { tickets, loading, error } = this.props;\r\n    let filteredTickets = [...tickets];\r\n\r\n    if (this.state.filter.length && !this.state.filter.includes(-1)) {\r\n      filteredTickets = filteredTickets.filter(ticket =>\r\n        this.state.filter.includes(ticket.segments[0].stops.length) &&\r\n        this.state.filter.includes(ticket.segments[1].stops.length))\r\n    }\r\n\r\n    if (tickets.length) {\r\n      if (this.state.tab === 'cheapest') {\r\n        filteredTickets = filteredTickets.sort((ticket1, ticket2) => ticket1.price - ticket2.price)\r\n      } else {\r\n        filteredTickets = filteredTickets.sort((ticket1, ticket2) =>\r\n          ticket1.segments[0].duration + ticket1.segments[1].duration\r\n          - ticket2.segments[0].duration - ticket2.segments[1].duration\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <TicketsBlock\r\n        tickets={filteredTickets.slice(0, 10)}\r\n        loading={loading}\r\n        error={error}\r\n        filter={this.state.filter}\r\n        tab={this.state.tab}\r\n        tabChangeHandler={this.tabChangeHandler.bind(this)}\r\n        filterChangeHandler={this.filterChangeHandler.bind(this)}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\ninterface LinkStateProps {\r\n  tickets: Ticket[],\r\n  loading: boolean,\r\n  error: string\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  setTickets: () => void\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): LinkStateProps => ({\r\n  tickets: state.tickets.tickets,\r\n  loading: state.tickets.loading,\r\n  error: state.tickets.error\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>): LinkDispatchProps => ({\r\n  setTickets: bindActionCreators(setTickets, dispatch)\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TicketsBlockContainer);","import App from './App';\r\n\r\nexport default App;","import React, { Component } from 'react';\r\nimport TicketsBlockContainer from '../../containers/TicketsBlockContainer';\r\nimport './App.scss';\r\n\r\n\r\nclass App extends Component {\r\n\r\n  render() {\r\n    return <TicketsBlockContainer />\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/configureStore';\nimport App from './components/app';\nimport './index.css';\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n)\n\nReactDOM.render(app, document.getElementById('root'));"],"sourceRoot":""}