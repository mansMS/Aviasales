(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/logo.c5fcf845.png"},22:function(e,t,a){e.exports=a(41)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),s=a.n(c),l=a(11),i=a(3),o=a(19),u=a(6),m={searchId:"",tickets:[],loading:!1,error:""},f=Object(i.c)({tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SEARCH_ID_REAUEST":return Object(u.a)({},e,{loading:!0,error:""});case"FETCH_SEARCH_ID_SUCCESS":return Object(u.a)({},e,{searchId:t.searchId});case"FETCH_TICKETS_SUCCESS":return Object(u.a)({},e,{tickets:t.tickets,loading:!1,error:""});case"FETCH_TICKETS_FAILURE":return Object(u.a)({},e,{error:t.error});default:return e}}}),d=Object(i.d)(f,Object(i.a)(o.a)),h=a(8),p=a(9),E=a(12),b=a(10),g=a(13),v=a(4),k=a(1),C=a.n(k),I=function(){return function(e){e({type:"FETCH_SEARCH_ID_REAUEST"}),function(){var e;return C.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.awrap(fetch("https://front-test.beta.aviasales.ru/search"));case 3:if((e=t.sent).ok){t.next=8;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u0444\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0430 \u043f\u043e\u0438\u0441\u043a\u0430: ".concat(e.status));case 8:return t.next=10,C.a.awrap(e.json());case 10:return t.abrupt("return",t.sent);case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",t.t0),t.abrupt("return","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u0444\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0430 \u043f\u043e\u0438\u0441\u043a\u0430");case 17:case"end":return t.stop()}}),null,null,[[0,13]])}().then((function(t){return e({type:"FETCH_SEARCH_ID_SUCCESS",searchId:t}),function(e){var t,a,n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.searchId,a=[],n=function e(t){var n,r;return C.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,C.a.awrap(fetch("".concat("https://front-test.beta.aviasales.ru/tickets","?searchId=").concat(t)));case 2:if(502!==(n=c.sent).status){c.next=8;break}return c.next=6,C.a.awrap(e(t));case 6:c.next=20;break;case 8:if(200===n.status){c.next=13;break}return c.next=11,C.a.awrap(e(t));case 11:c.next=20;break;case 13:return c.next=15,C.a.awrap(n.json());case 15:if(r=c.sent,a=[].concat(Object(v.a)(a),Object(v.a)(r.tickets)),r.stop){c.next=20;break}return c.next=20,C.a.awrap(e(t));case 20:case"end":return c.stop()}}))},r.next=5,C.a.awrap(n(t));case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}))}(t)})).then((function(t){e({type:"FETCH_TICKETS_SUCCESS",tickets:t})})).catch((function(t){return e(function(e){return{type:"FETCH_TICKETS_FAILURE",error:e}}(t.message))}))}},N=a(20),H=a.n(N),S=(a(33),function(e){var t=e.filter,a=e.filterChangeHandler;return r.a.createElement("section",{className:"FilterSection"},r.a.createElement("div",{className:"FilterBlock"},r.a.createElement("p",{className:"FilterHeader"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",{className:"FilterList"},["\u0412\u0441\u0435","\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"].map((function(e,n){return r.a.createElement("li",{className:"FilterItem",key:n},r.a.createElement("input",{className:"FilterItemInput",type:"checkbox",id:"checkbox_".concat(n),value:n,checked:t.includes(n-1),onChange:a}),r.a.createElement("label",{className:"FilterItemLabel",htmlFor:"checkbox_".concat(n)},e))})))))}),j=(a(34),function(e){var t=e.tab,a=e.tabChangeHandler;return r.a.createElement("section",{className:"Tabs"},r.a.createElement("div",{className:"TabsRadio"},r.a.createElement("input",{className:"RadioInput",type:"radio",name:"radioTab",id:"cheapestRadio",checked:"cheapest"===t,value:"cheapest",onChange:a}),r.a.createElement("label",{className:"RadioLabel",htmlFor:"cheapestRadio"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439")),r.a.createElement("div",{className:"TabsRadio"},r.a.createElement("input",{className:"RadioInput",type:"radio",name:"radioTab",id:"fastestRadio",checked:"fastest"===t,value:"fastest",onChange:a}),r.a.createElement("label",{className:"RadioLabel",htmlFor:"fastestRadio"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")))}),O=a(21),T=(a(35),function(e){var t=e.ticket,a=t.price,n=t.carrier,c=t.segments,s=Object(O.a)(c,2),l=s[0],i=l.origin,o=l.destination,u=l.stops,m=l.duration,f=s[1],d=f.origin,h=f.destination,p=f.stops,E=f.duration,b=new Date(c[0].date),g=b.getHours(),v=b.getMinutes();b.setMinutes(b.getMinutes()+c[0].duration);var k=b.getHours(),C=b.getMinutes(),I=new Date(c[1].date),N=I.getHours(),H=I.getMinutes();I.setMinutes(I.getMinutes()+c[0].duration);var S=I.getHours(),j=I.getMinutes();return r.a.createElement("div",{className:"TicketItem"},r.a.createElement("div",{className:"MainInfo"},r.a.createElement("div",{className:"Cost"},"".concat(Math.floor(a/1e3)," ").concat((a+"").slice(-3)," \u0420")),r.a.createElement("img",{className:"CarrierIcon",src:"https://pics.avs.io/99/36/".concat(n,".png"),alt:"CarrierIcon"})),r.a.createElement("div",{className:"FlightInfo"},r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},"".concat(i," - ").concat(o)),r.a.createElement("span",{className:"Info"},"".concat(g,":").concat(v," - ").concat(k,":").concat(C))),r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",{className:"Info"},"".concat(Math.floor(m/60),"\u0447 ").concat(m%60,"\u043c"))),r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},u.length?"".concat(u.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a").concat(1===u.length?"\u0430":"\u0438"):"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("span",{className:"Info"},u.map((function(e){return"".concat(e," ")})))),r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},"".concat(d," - ").concat(h)),r.a.createElement("span",{className:"Info"},"".concat(N,":").concat(H," - ").concat(S,":").concat(j))),r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",{className:"Info"},"".concat(Math.floor(E/60),"\u0447 ").concat(E%60,"\u043c"))),r.a.createElement("div",null,r.a.createElement("span",{className:"InfoLabel"},p.length?"".concat(p.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a").concat(1===p.length?"\u0430":"\u0438"):"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("span",{className:"Info"},p.map((function(e){return"".concat(e," ")}))))))}),x=(a(36),function(){return r.a.createElement("div",{className:"SpinnerBlock"},r.a.createElement("div",{className:"Spinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),y=(a(37),function(e){var t=e.tickets,a=e.loading;return r.a.createElement("section",{className:"TicketSection"},a?r.a.createElement("div",{className:"Loading-Error"},r.a.createElement(x,null)):t.length?t.map((function(e,t){return r.a.createElement(T,{ticket:e,key:t})})):r.a.createElement("p",{className:"Loading-Error"},"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"))}),_=(a(38),function(e){var t=e.tickets,a=e.loading,n=e.error,c=e.filter,s=e.tab,l=e.filterChangeHandler,i=e.tabChangeHandler;return n?r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438: ",n):r.a.createElement("div",{className:"TicketsContainer"},r.a.createElement("section",{className:"Logo"},r.a.createElement("img",{src:H.a,alt:"logo"})),r.a.createElement(S,{filter:c,filterChangeHandler:l}),r.a.createElement(j,{tab:s,tabChangeHandler:i}),r.a.createElement(y,{tickets:t,loading:a}))}),F=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={filter:[],tab:"cheapest"},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.setTickets()}},{key:"filterChangeHandler",value:function(e){var t=+e.target.value-1;this.state.filter.includes(t)?this.setState((function(e){return{filter:[].concat(Object(v.a)(e.filter.slice(0,e.filter.indexOf(t))),Object(v.a)(e.filter.slice(e.filter.indexOf(t)+1)))}})):this.setState((function(e){return{filter:[].concat(Object(v.a)(e.filter),[t])}}))}},{key:"tabChangeHandler",value:function(e){this.setState({tab:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props,a=t.tickets,n=t.loading,c=t.error,s=Object(v.a)(a);return this.state.filter.length&&!this.state.filter.includes(-1)&&(s=s.filter((function(t){return e.state.filter.includes(t.segments[0].stops.length)&&e.state.filter.includes(t.segments[1].stops.length)}))),a.length&&(s="cheapest"===this.state.tab?s.sort((function(e,t){return e.price-t.price})):s.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-t.segments[0].duration-t.segments[1].duration}))),r.a.createElement(_,{tickets:s.slice(0,10),loading:n,error:c,filter:this.state.filter,tab:this.state.tab,tabChangeHandler:this.tabChangeHandler.bind(this),filterChangeHandler:this.filterChangeHandler.bind(this)})}}]),t}(n.Component),w=Object(l.b)((function(e){return{tickets:e.tickets.tickets,loading:e.tickets.loading,error:e.tickets.error}}),(function(e){return{setTickets:Object(i.b)(I,e)}}))(F),R=(a(39),function(e){function t(){return Object(h.a)(this,t),Object(E.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(w,null)}}]),t}(n.Component)),L=(a(40),r.a.createElement(l.a,{store:d},r.a.createElement(R,null)));s.a.render(L,document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7d42be7a.chunk.js.map